### 服务器相关操作

- 查看liunx 内存使用率
`free`  `top` 可以不用加参数，直接回车


- 如何查看单个进程占用的内存大小

```
top -p pid[进程号]

pmap -x pid[进程号]

ps aux | grep pid[进程号]
```

- 如何查看正在使用的服务和端口

```
netstat -tunlp

netstat -antup

lsof -i:PORT
```

- 如何查看服务器进程信息

```
ps -ef | grep pid[进程号|程序名]

ps auxww| grep pid

lsof -p pid

lsof –i:端口号

top -p pid
```

- 如何停止进程

```
kill -9 pid[进程id]

killall 程序名
```

- 常用命令

```
//进程监控命令，用来监控系统的整体性能。
可以显示系统负载，进程，cpu，内存，分页等信息，常用shift+m和shift+p来按memory和cpu使用对进程进行排序。
top

//系统监控命令，重点侧重于虚拟内存，也可以监控cpu，进程，内存分页以及IO的状态信息。
例如，vmstat 3 10，每隔3秒输出结果，执行10次。
vmstat

//用于输出cpu状态和IO状态的工具，可以详细展示系统的IO信息。
例如iostat -dxmt 10，每10秒以MB的格式输出IO的详细信息。
iostat

//用来检查系统的磁盘空间占用状况。
例如：df -m，以MB为单位展现磁盘使用状况。
df

//列举系统中被打开的文件
/*
lsof -i：36000，显示使用36000端口的进程
lsof -u root，显示以root运行的程序
lsof -c php-fpm，显示php-fpm进程打开的文件
lsof php.ini，显示打开php.ini的进程。
 */
lsof

/*
进程查看命令，可以用来显示进程的详细信息。
常用命令参数组合为，ps -ef，ps aux，推荐使用ps -A -o来自定义输出字段。
例如：
ps -A -o pid,stat,uname,%cpu,%mem,rss,args,lstart,etime |sort -k6,6 -rn，按所列字段输出并以第六个字段进行排序
ps -A -o comm |sort -k1 |uniq -c|sort -k1 -rn|head，列出运行实例最多的进程。
 */
ps
```

-  如何设置云服务器开机任务

Linux内核启动顺序为：
/sbin/init进程启动，
然后依次执行init初始脚本，
运行级别脚本/etc/rc.d/rc*.d，*号值等于运行模式，可以在/etc/inittab中查看，最后执行/etc/rc.d/rc.local。

如果需要配置开机任务，可以在/etc/rc.d/rc*.d中的S**rclocal文件配置，也可以在/etc/rc.d/rc.local中配置。

- 查看操作服务器版本

```
uname -a

cat /proc/version

cat /etc/issue

```

- 如何查找文件系统大文件

可以首先通过df命令查看磁盘分区使用情况，比如df -m；
然后通过du命令查看具体文件夹的大小，比如du -sh ./*，du -h --max-depth=1|head -10；
使用ls命令列出文件以及大小，比如ls -lSh；
另外，也可以通过find命令直接查看特定目录下的文件大小，比如find / -type f -size +10M -exec ls -lrt {} \;


- curl 我们可以用 -X POST 来申明我们的请求方法，用 -d 参数，来传送我们的参数。

`curl 127.0.0.1/api/user -X POST -d "user=liyi&pwd=123456"`

- 查看服务器的端口是否是防火墙的开放端口

`firewall -cmd --query-port=port/tcp`

* 防火墙开放某一个端口

`firewall -cmd --zone=public --add-port=port/tcp --permanent`

* 重启防火墙 - 平滑重启

`firewall -cmd reload`

* 关闭防火墙
`systemctl stop firewall.server`

* 开启防火墙
`systemctl start fireall.server`
