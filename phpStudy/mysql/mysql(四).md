### MySql学习四

在练习写SQL语句的时候，我们经常会使用`join`来做表的链接，包括左链接，右链接，内链接。但是，有时候也会有不想写`join`链接，而改用只查一张表，然后拿着
第一张表的数据，再去循环查取最后的结果，例如：

我有两张表，一张`users`表，一张`users_bak`表。它们两张表的一一对应的就是`users`表的`id`对应`users_bak`表的`id`。那么我们可以得到如下查询：

```mysql
select * from users as u inner join users_bak as b on u.id = b.id order by create_at desc limit 500;

-- 耗时 0.0086000000  0.0108000000  0.0150000000
 
```

也就是耗时在[0.1*]到[0.00*]之间；我没有用`mysql-Navicat Premium`客户端测试,环境是在`laravel`框架里。

第二种循环测试：

```php
$data = DB::select("select * from users order by create_at desc limit 10");

        foreach ($data as $v => $item) {
            DB::select("select * from users_bak where id = ?",[$item->id]);
        }
        
// 耗时 0.1488000000  0.1130000000  0.1110000000  0.1232000000        
```

也就是，我们查询条件相同，一种是使用内连接，一种是使用循环，得到的结果就是，循环更加耗时，循环做结果，耗时最少也是[>=0.1*]。那么我们现在只要一条记录
的结果是什么样的呢？

* `join`得到的结果：`0.0099000000  0.0067000000  0.0110000000  0.0216000000  0.0092000000  0.0060000000`

* 'foreach'得到的结果：`0.0118000000  0.0069000000  0.0076000000  0.0083000000`

也就是说我们只需要一条记录的时候，它们的耗时是差不多的。

现在，我们要得到`10`条记录呢？

* `join`得到的结果：`0.0066000000  0.0060000000  0.0072000000  0.0066000000  0.0203000000  0.0099000000`

* 'foreach'得到的结果：`0.0126000000  0.0096000000  0.0216000000  0.0110000000  0.0101000000  0.0087000000`

现在我们可以看到，在相同的环境里，我们只需要一条记录的时候，两张表，可能不管你怎么写，效率都是差不多的，但是，在需要数据量多的时候，就不能用循环了，最
起码在PHP当中，不要使用循环去获取数据。这样只会使我们的程序很慢很慢很慢

